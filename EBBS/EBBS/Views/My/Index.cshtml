@model EBBS.Data.User

<div>
    <h4>User</h4>
    <hr />
    <script src="~/Scripts/bootstrap.min.js"></script>
    <script src="~/Scripts/jquery-3.3.1.min.js"></script>

    <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#cpModal">Change Password</button>

    <!-- Modal -->
    <div id="cpModal" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Enter New Password</h4>
                </div>
                <div class="modal-body">
                    <span>Current Password</span><input type="password" id="password" class="form-control" />
                    <span>New Password</span><input type="password" id="newpassword" class="form-control" />
                    <span>Confirm Password</span><input type="password" id="cpassword" class="form-control" />
                </div>
                <div class="modal-footer">
                    <a href="#" class="btn btn-info" id="cpBtn">Change Password</a>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>

    <script>
        $("#cpBtn").click(function (e) {
            e.preventDefault();
            var password = $("#password").val();
            var newPassword = $("#newpassword").val();
            var confirmPassword = $("#cpassword").val();

            if (newPassword.length < 6) {
                alert("The password should be at least 6 characters!")
            } else if (newPassword != confirmPassword) {
                alert("Passwords do not match!");
            } else {
                $.ajax({
                    type: 'POST',
                    data: { password: password, newPassword: newPassword },
                    url: '/My/ChangeMyPassword',
                    success: function (response) {
                        alert(response);
                    },
                    error: function (a, b, c) {

                    }


                });
            }




        });

    </script>




    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.firstName)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.firstName)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.lastName)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.lastName)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.username)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.username)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.password)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.password)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.createTime)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.createTime)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.updateTime)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.updateTime)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.lastLogin)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.lastLogin)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.answer)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.answer)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.userImage)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.userImage)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.imageSize)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.imageSize)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Role.roleName)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Role.roleName)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.SecurityQuestion.question)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.SecurityQuestion.question)
        </dd>

    </dl>
</div>
<p>
    @Html.ActionLink("Edit", "Edit", new { id = Model.userId }) |
    @Html.ActionLink("Back to List", "Index")
</p>

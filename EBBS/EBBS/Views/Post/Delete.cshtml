@model EBBS.Data.Post

@{
    ViewBag.Title = "Delete";
}

<h2>Delete</h2>

<h3>Are you sure you want to delete this?</h3>
<div>
    <h4>Post</h4>
    <hr />
    <div class="post">
        <span>@Html.DisplayFor(modelItem => Model.postTitle)</span>
        <p>@Html.DisplayFor(modelItem => Model.postContent)</p>
        <p>Created in: @Html.DisplayFor(modelItem => Model.createTime) </p>
        <p>Category: @Html.DisplayFor(modelItem => Model.Category.categoryName)</p>
        <p>Created By: @Html.DisplayFor(modelItem => Model.User.firstName)</p>
        @if (Model.mediaType == "image/jpeg")
        {
            <img src="~/images/@Model.mediaPath" width="100" height="100" />
        }
        else if (Model.mediaType == "video/mp4")
        {
            <video width="320" height="240" controls>
                <source src="~/images/@Model.mediaPath" type="@Model.mediaType">

                Your browser does not support the video tag.
            </video>
        }


    </div>


    <a class="btn btn-danger" id="delete" data="@Model.pId">Delete</a>
</div>
<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<script type="text/javascript">
    $("#delete").click(function(e) {
        e.preventDefault();
        var id = $(this).attr("data");
        alert(id);
        $.ajax({
            type: 'POST',
            data: {id: id},
            url: '/Post/DeletePost',
            success: function(response) {
                alert(response);
                window.location.href = "/Post/Index";

            },
            error: function(a, b, c) {
                

            }
        });

    });

</script>